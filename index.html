<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For You, Guggu üíå</title>

  <!-- Open Graph for WhatsApp / Instagram / link previews -->
  <meta property="og:title" content="For You, Guggu üíå" />
  <meta property="og:description" content="Someone special has a question for you... üíï" />
  <meta property="og:image" content="photo2.png" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#e91e63" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Quicksand:wght@400;600;700&family=Great+Vibes&family=Satisfy&display=swap" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg-1: #0a0a12;
      --bg-2: #1a0a1a;
      --pink: #f48fb1;
      --deep-pink: #e91e63;
      --dark-pink: #c2185b;
    }

    body {
      min-height: 100vh;
      font-family: 'Quicksand', sans-serif;
      background: var(--bg-1);
      display: flex; align-items: center; justify-content: center;
      position: relative;
      overflow: hidden;
      transition: background 3s ease;
    }

    /* Animated gradient overlay */
    body::before {
      content: '';
      position: fixed; inset: 0;
      background: linear-gradient(135deg, #0a0015 0%, #0d0a1a 25%, #1a0520 50%, #0a0a18 75%, #0f0520 100%);
      background-size: 400% 400%;
      animation: gradientShift 20s ease infinite;
      z-index: 0;
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      25% { background-position: 100% 50%; }
      50% { background-position: 100% 0%; }
      75% { background-position: 0% 100%; }
      100% { background-position: 0% 50%; }
    }

    /* Warm mode after Yes */
    body.warm::before {
      background: linear-gradient(135deg, #1a0520 0%, #200a18 25%, #2a0a20 50%, #1a0818 75%, #220a25 100%);
      background-size: 400% 400%;
      animation: gradientShiftWarm 15s ease infinite;
    }
    @keyframes gradientShiftWarm {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ===== LOADING SCREEN ===== */
    .loading-screen {
      position: fixed; inset: 0; z-index: 9999;
      background: #0a0a12;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      transition: opacity 0.8s ease, visibility 0.8s;
    }
    .loading-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
    .loading-heart {
      font-size: 60px;
      animation: loadingPulse 0.8s ease-in-out infinite;
    }
    @keyframes loadingPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }
    .loading-text {
      font-family: 'Great Vibes', cursive;
      font-size: 1.8rem; color: var(--pink);
      margin-top: 20px;
    }
    .loading-bar-container {
      width: 200px; height: 4px; background: rgba(255,255,255,0.1);
      border-radius: 4px; margin-top: 25px; overflow: hidden;
    }
    .loading-bar {
      height: 100%; width: 0%; border-radius: 4px;
      background: linear-gradient(90deg, var(--deep-pink), var(--pink), var(--deep-pink));
      background-size: 200% 100%;
      animation: loadProgress 2.5s ease-in-out forwards, shimmer 1s linear infinite;
    }
    @keyframes loadProgress { to { width: 100%; } }
    @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

    /* ===== STARS ===== */
    .stars-bg {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 1; overflow: hidden;
    }
    .star {
      position: absolute; width: 3px; height: 3px;
      background: white; border-radius: 50%;
      animation: twinkle var(--dur) ease-in-out infinite; opacity: 0;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0; transform: scale(0.5); }
      50% { opacity: var(--opacity); transform: scale(1.2); }
    }

    /* ===== ROSE PETALS ===== */
    .petals-bg {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 2; overflow: hidden;
    }
    .petal {
      position: absolute; top: -40px;
      width: 18px; height: 18px;
      background: radial-gradient(ellipse at 30% 30%, var(--pink), var(--deep-pink));
      border-radius: 50% 0 50% 50%;
      opacity: 0.5;
      animation: petalFall linear infinite;
    }
    @keyframes petalFall {
      0% { transform: translateY(0) rotate(0deg) translateX(0); opacity: 0.5; }
      25% { transform: translateY(25vh) rotate(90deg) translateX(30px); }
      50% { transform: translateY(50vh) rotate(180deg) translateX(-20px); opacity: 0.6; }
      75% { transform: translateY(75vh) rotate(270deg) translateX(25px); }
      100% { transform: translateY(110vh) rotate(360deg) translateX(-10px); opacity: 0; }
    }

    /* Floating hearts */
    .hearts-bg {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 2; overflow: hidden;
    }
    .floating-heart {
      position: absolute; bottom: -60px;
      animation: floatUp linear infinite; opacity: 0.4;
    }
    @keyframes floatUp {
      0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 0.4; }
      50% { opacity: 0.6; }
      100% { transform: translateY(-110vh) rotate(360deg) scale(0.3); opacity: 0; }
    }

    /* ===== SPARKLE CURSOR ===== */
    .sparkle {
      position: fixed; pointer-events: none; z-index: 9999;
      font-size: 12px;
      animation: sparkleAnim 0.7s ease-out forwards;
    }
    @keyframes sparkleAnim {
      0% { opacity: 1; transform: translate(0, 0) scale(1) rotate(0deg); }
      100% { opacity: 0; transform: translate(var(--sx), var(--sy)) scale(0) rotate(180deg); }
    }

    /* ===== MUSIC TOGGLE ===== */
    .music-btn {
      position: fixed; top: 20px; right: 20px; z-index: 600;
      width: 48px; height: 48px; border-radius: 50%;
      background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: white; font-size: 22px; cursor: pointer;
      display: none; align-items: center; justify-content: center;
      transition: all 0.3s;
      outline: none;
    }
    .music-btn.visible { display: flex; }
    .music-btn:hover, .music-btn:focus-visible {
      background: rgba(255, 255, 255, 0.15); transform: scale(1.1);
    }
    .music-btn.playing { animation: musicPulse 1s ease-in-out infinite; }
    @keyframes musicPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(233, 30, 99, 0.4); }
      50% { box-shadow: 0 0 0 12px rgba(233, 30, 99, 0); }
    }

    /* ===== ENVELOPE INTRO ===== */
    .envelope-screen {
      position: fixed; inset: 0;
      display: none; flex-direction: column; align-items: center; justify-content: center;
      z-index: 500;
      transition: opacity 0.8s ease;
    }
    .envelope-screen.visible { display: flex; }
    .envelope-screen.hidden { opacity: 0; pointer-events: none; }

    .for-you-text {
      font-family: 'Great Vibes', cursive;
      font-size: 2rem; color: rgba(244, 143, 177, 0.8);
      margin-bottom: 30px;
      animation: fadeIn 1s ease forwards;
      opacity: 0;
    }
    @keyframes fadeIn { to { opacity: 1; } }

    .envelope-wrapper {
      position: relative; width: 260px; height: 180px;
      cursor: pointer; animation: envelopeFloat 3s ease-in-out infinite;
      outline: none;
    }
    .envelope-wrapper:focus-visible {
      outline: 2px solid var(--pink);
      outline-offset: 8px;
      border-radius: 8px;
    }
    @keyframes envelopeFloat {
      0%, 100% { transform: translateY(0) rotate(-1deg); }
      50% { transform: translateY(-10px) rotate(1deg); }
    }
    .envelope-glow {
      position: absolute; inset: -30px; border-radius: 50%;
      background: radial-gradient(circle, rgba(233,30,99,0.15) 0%, transparent 70%);
      animation: glowPulse 2s ease-in-out infinite;
    }
    @keyframes glowPulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 1; }
    }
    .envelope-body {
      position: absolute; bottom: 0; width: 260px; height: 150px;
      background: linear-gradient(145deg, var(--pink), var(--deep-pink));
      border-radius: 8px;
      box-shadow: 0 15px 50px rgba(233, 30, 99, 0.4);
    }
    .envelope-flap {
      position: absolute; top: 0; left: 0; width: 0; height: 0;
      border-left: 130px solid transparent;
      border-right: 130px solid transparent;
      border-top: 100px solid #f06292;
      transform-origin: top center;
      transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
      z-index: 2;
    }
    .envelope-flap.open { transform: rotateX(180deg); }
    .envelope-heart {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      font-size: 50px; z-index: 3;
      animation: heartPulse 1.2s ease-in-out infinite;
    }
    @keyframes heartPulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.2); }
    }
    .envelope-letter {
      position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
      width: 220px; height: 120px; background: white;
      border-radius: 4px; z-index: 1;
      transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Great Vibes', cursive; font-size: 1.1rem; color: #c2185b;
      padding: 10px; text-align: center;
    }
    .envelope-letter.rise { transform: translateX(-50%) translateY(-140px); }

    .envelope-tap-text {
      margin-top: 30px;
      font-family: 'Quicksand', sans-serif;
      color: rgba(255, 255, 255, 0.5); font-size: 0.95rem;
      animation: fadeInOut 2s ease-in-out infinite;
    }
    @keyframes fadeInOut { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.9; } }

    /* ===== MAIN CARD ===== */
    .main-content { display: none; width: 100%; }
    .main-content.show {
      display: flex; align-items: center; justify-content: center;
    }

    .card {
      position: relative; z-index: 10;
      background: rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 30px;
      padding: 45px 35px; max-width: 520px; width: 92%;
      text-align: center;
      box-shadow:
        0 25px 80px rgba(233, 30, 99, 0.12),
        0 0 120px rgba(233, 30, 99, 0.06),
        inset 0 0 60px rgba(233, 30, 99, 0.03);
      animation: cardEntry 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      opacity: 0; transform: scale(0.8) translateY(30px);
      max-height: 90vh;
      overflow-y: auto;
      overflow-x: hidden;
      scrollbar-width: thin;
      scrollbar-color: rgba(244,143,177,0.3) transparent;
    }
    .card::-webkit-scrollbar { width: 4px; }
    .card::-webkit-scrollbar-track { background: transparent; }
    .card::-webkit-scrollbar-thumb { background: rgba(244,143,177,0.3); border-radius: 4px; }
    @keyframes cardEntry { to { opacity: 1; transform: scale(1) translateY(0); } }

    /* Animated glow ring */
    .card::before {
      content: '';
      position: absolute; inset: -1px;
      border-radius: 30px;
      background: linear-gradient(135deg, transparent, rgba(233,30,99,0.15), transparent, rgba(244,143,177,0.1), transparent);
      background-size: 300% 300%;
      animation: glowRing 6s ease infinite;
      z-index: -1;
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask-composite: xor;
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      padding: 1px;
    }
    @keyframes glowRing {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Teddy */
    .teddy-container {
      position: relative; width: 130px; height: 130px;
      margin: 0 auto 15px;
      animation: teddyBounce 2.5s ease-in-out infinite;
    }
    @keyframes teddyBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-14px); }
    }
    .teddy {
      font-size: 100px; line-height: 130px;
      filter: drop-shadow(0 8px 25px rgba(233, 30, 99, 0.3));
      user-select: none; cursor: pointer;
      transition: transform 0.3s;
    }
    .teddy:hover { transform: scale(1.1) rotate(5deg); }
    .teddy-heart {
      position: absolute; top: 5px; right: 0; font-size: 32px;
      animation: heartPulse 1.2s ease-in-out infinite;
    }
    .teddy-wink {
      position: absolute; top: 42px; left: 50%;
      transform: translateX(-50%);
      font-size: 14px; color: var(--pink);
      opacity: 0; transition: opacity 0.3s;
      font-family: 'Quicksand', sans-serif; font-weight: 700;
      white-space: nowrap;
    }
    .teddy-container:hover .teddy-wink { opacity: 1; }

    /* Question with glow */
    .question {
      font-family: 'Dancing Script', cursive;
      font-size: 2.3rem; font-weight: 700;
      color: var(--pink); margin-bottom: 8px; line-height: 1.3;
      min-height: 3.2rem;
      text-shadow: 0 0 30px rgba(233, 30, 99, 0.3), 0 0 60px rgba(233, 30, 99, 0.15);
    }
    .typing-cursor {
      display: inline-block; width: 3px; height: 2rem;
      background: var(--pink); margin-left: 4px;
      animation: blink 0.6s step-end infinite; vertical-align: text-bottom;
    }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    .sub-text {
      font-size: 0.95rem; color: rgba(255, 255, 255, 0.5);
      margin-bottom: 30px; opacity: 0;
      animation: fadeIn 0.5s ease forwards; animation-delay: 2.5s;
    }

    /* Buttons */
    .buttons {
      display: flex; justify-content: center; gap: 24px;
      align-items: center; min-height: 70px; position: relative;
      opacity: 0; animation: fadeIn 0.5s ease forwards; animation-delay: 2.8s;
    }
    .btn {
      padding: 14px 40px; border: none; border-radius: 50px;
      font-family: 'Quicksand', sans-serif;
      font-size: 1.15rem; font-weight: 700;
      cursor: pointer; letter-spacing: 0.5px; position: relative;
      outline: none;
    }
    .btn:focus-visible {
      outline: 2px solid white;
      outline-offset: 3px;
    }
    .btn-yes {
      background: linear-gradient(135deg, var(--deep-pink), var(--dark-pink));
      color: white;
      box-shadow: 0 8px 30px rgba(233, 30, 99, 0.5);
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .btn-yes:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 40px rgba(233, 30, 99, 0.6), 0 0 30px rgba(233, 30, 99, 0.3);
    }
    .btn-no {
      background: linear-gradient(135deg, #455a64, #37474f);
      color: rgba(255,255,255,0.8);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      position: absolute; user-select: none; white-space: nowrap;
    }
    .btn-no.shaking { animation: shake 0.3s infinite; }
    @keyframes shake {
      0%, 100% { transform: translateX(0) rotate(0deg); }
      20% { transform: translateX(-4px) rotate(-3deg); }
      40% { transform: translateX(4px) rotate(3deg); }
      60% { transform: translateX(-3px) rotate(-2deg); }
      80% { transform: translateX(3px) rotate(2deg); }
    }

    /* ===== YES SCREEN ===== */
    .yes-screen {
      display: none; flex-direction: column; align-items: center;
      animation: cardEntry 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }
    .yes-screen .big-heart {
      font-size: 80px; animation: heartPulse 1s ease-in-out infinite; margin-bottom: 5px;
    }
    .yes-screen h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 2.6rem; color: var(--pink); margin-bottom: 15px;
      text-shadow: 0 0 30px rgba(233, 30, 99, 0.3);
    }

    /* Love letter box */
    .love-letter-box {
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 20px; padding: 22px 18px;
      max-width: 380px; margin: 0 auto 15px;
    }
    .love-letter-box p {
      font-size: 1.02rem; color: rgba(255, 255, 255, 0.8);
      line-height: 1.9; margin-bottom: 6px;
      opacity: 0;
    }
    .love-letter-box p.typed { animation: typeLineIn 0.6s ease forwards; }
    @keyframes typeLineIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .love-letter-box p strong { color: var(--pink); }

    /* Reasons section */
    .reasons-title {
      font-family: 'Satisfy', cursive;
      font-size: 1.3rem; color: var(--pink); margin-bottom: 10px;
      opacity: 0; animation: fadeIn 0.5s ease forwards; animation-delay: 3s;
    }
    .reasons {
      list-style: none; text-align: left;
      max-width: 340px; margin: 0 auto 15px;
    }
    .reasons li {
      font-size: 0.95rem; color: rgba(255,255,255,0.75);
      padding: 6px 0; padding-left: 25px; position: relative;
      opacity: 0; transform: translateX(-15px);
      animation: slideInReason 0.4s ease forwards;
    }
    .reasons li::before {
      content: 'üíó'; position: absolute; left: 0; top: 6px; font-size: 14px;
    }
    @keyframes slideInReason {
      to { opacity: 1; transform: translateX(0); }
    }

    .yes-screen .couple-emoji {
      font-size: 55px; margin-top: 10px;
      animation: teddyBounce 2s ease-in-out infinite;
    }

    /* ===== PHOTO GALLERY ===== */
    .gallery-section {
      margin-top: 20px; opacity: 0;
      animation: fadeIn 0.8s ease forwards; animation-delay: 4.5s;
      width: 100%;
    }
    .gallery-title {
      font-family: 'Satisfy', cursive;
      font-size: 1.3rem; color: var(--pink); margin-bottom: 15px;
    }
    .gallery-container {
      position: relative;
      width: 240px; height: 300px;
      margin: 0 auto;
      perspective: 800px;
    }
    .gallery-slide {
      position: absolute; inset: 0;
      border-radius: 18px;
      overflow: hidden;
      border: 3px solid rgba(244, 143, 177, 0.3);
      box-shadow: 0 10px 40px rgba(233, 30, 99, 0.2), 0 0 40px rgba(233, 30, 99, 0.08);
      opacity: 0;
      transform: scale(0.85) rotateY(15deg);
      transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .gallery-slide.active {
      opacity: 1;
      transform: scale(1) rotateY(0);
      z-index: 2;
    }
    .gallery-slide.prev {
      opacity: 0.3;
      transform: scale(0.8) translateX(-30px) rotateY(10deg);
      z-index: 1;
    }
    .gallery-slide.next {
      opacity: 0.3;
      transform: scale(0.8) translateX(30px) rotateY(-10deg);
      z-index: 1;
    }
    .gallery-slide img {
      width: 100%; height: 100%; object-fit: cover;
    }
    .gallery-dots {
      display: flex; justify-content: center; gap: 8px;
      margin-top: 15px;
    }
    .gallery-dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: rgba(255,255,255,0.2);
      border: none; cursor: pointer; padding: 0;
      transition: all 0.3s;
      outline: none;
    }
    .gallery-dot.active {
      background: var(--pink);
      transform: scale(1.3);
      box-shadow: 0 0 10px rgba(233, 30, 99, 0.5);
    }
    .gallery-caption {
      font-family: 'Satisfy', cursive;
      font-size: 1rem; color: rgba(244, 143, 177, 0.6);
      margin-top: 10px;
    }

    /* ===== DAYS COUNTER ===== */
    .days-counter {
      margin-top: 20px; opacity: 0;
      animation: fadeIn 0.8s ease forwards; animation-delay: 5.5s;
    }
    .days-counter .counter-text {
      font-family: 'Quicksand', sans-serif;
      font-size: 0.9rem; color: rgba(255,255,255,0.5);
    }
    .days-counter .counter-number {
      font-family: 'Dancing Script', cursive;
      font-size: 2rem; color: var(--pink);
      font-weight: 700;
      text-shadow: 0 0 20px rgba(233, 30, 99, 0.3);
    }
    .days-counter .counter-label {
      font-family: 'Satisfy', cursive;
      font-size: 1.1rem; color: rgba(255,255,255,0.4);
    }

    /* Continuous rising hearts */
    .continuous-heart {
      position: fixed; pointer-events: none; z-index: 100;
      animation: riseHeart 3s ease-out forwards;
    }
    @keyframes riseHeart {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-300px) scale(0.3); }
    }

    /* Burst */
    .burst-heart {
      position: fixed; z-index: 100; pointer-events: none;
      animation: burstAnim 1.5s ease-out forwards;
    }
    @keyframes burstAnim {
      0% { opacity: 1; transform: translate(0, 0) scale(1) rotate(0deg); }
      100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0.3) rotate(360deg); }
    }

    #confetti-canvas {
      position: fixed; inset: 0; pointer-events: none; z-index: 200;
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 500px) {
      .card { padding: 35px 18px; border-radius: 24px; }
      .question { font-size: 1.8rem; }
      .teddy { font-size: 80px; line-height: 110px; }
      .teddy-container { width: 110px; height: 110px; }
      .btn { padding: 12px 28px; font-size: 1rem; }
      .yes-screen h1 { font-size: 2rem; }
      .envelope-wrapper { width: 200px; height: 140px; }
      .envelope-body { width: 200px; height: 115px; }
      .envelope-flap { border-left-width: 100px; border-right-width: 100px; border-top-width: 80px; }
      .envelope-letter { width: 170px; height: 90px; font-size: 0.9rem; }
      .envelope-heart { font-size: 38px; }
      .for-you-text { font-size: 1.5rem; }
      .loading-text { font-size: 1.4rem; }
      .gallery-container { width: 200px; height: 250px; }
    }
  </style>
</head>
<body>

  <!-- ===== LOADING SCREEN ===== -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-heart">üíù</div>
    <div class="loading-text">Loading love...</div>
    <div class="loading-bar-container">
      <div class="loading-bar" id="loadingBar"></div>
    </div>
  </div>

  <!-- Stars -->
  <div class="stars-bg" id="starsBg"></div>

  <!-- Rose petals -->
  <div class="petals-bg" id="petalsBg"></div>

  <!-- Floating hearts -->
  <div class="hearts-bg" id="heartsBg"></div>

  <!-- Music toggle -->
  <button class="music-btn" id="musicBtn" onclick="toggleMusic()" title="Toggle Music" aria-label="Toggle background music">üîá</button>

  <!-- ===== ENVELOPE ===== -->
  <div class="envelope-screen" id="envelopeScreen">
    <div class="for-you-text">Just for you, Guggu...</div>
    <div class="envelope-wrapper" id="envelope" onclick="openEnvelope()" tabindex="0" role="button" aria-label="Open envelope">
      <div class="envelope-glow"></div>
      <div class="envelope-flap" id="envelopeFlap"></div>
      <div class="envelope-body"></div>
      <div class="envelope-heart">üíå</div>
      <div class="envelope-letter" id="envelopeLetter">I have something to ask you...</div>
    </div>
    <p class="envelope-tap-text">‚ú® Tap the envelope ‚ú®</p>
  </div>

  <!-- ===== MAIN CONTENT ===== -->
  <div class="main-content" id="mainContent">
    <div class="card" id="mainCard">

      <!-- Question screen -->
      <div id="questionScreen">
        <div class="teddy-container">
          <div class="teddy" id="teddyEmoji">üß∏</div>
          <div class="teddy-heart">‚ù§Ô∏è</div>
          <div class="teddy-wink">*blushes* üôà</div>
        </div>
        <h1 class="question" id="questionText"></h1>
        <p class="sub-text">Pretty please? ü•∫</p>
        <div class="buttons" id="buttonsContainer">
          <button class="btn btn-yes" id="yesBtn" onclick="sayYes()">Yes! üíñ</button>
          <button class="btn btn-no" id="noBtn">No</button>
        </div>
      </div>

      <!-- Yes screen -->
      <div class="yes-screen" id="yesScreen">
        <div class="big-heart">üíñ</div>
        <h1>Yayyyy, Guggu! üéâ</h1>
        <div class="love-letter-box" id="loveLetterBox">
          <p>You are the best person and the most beautiful person I know üòç</p>
          <p>I wanna love you till infinity ‚ôæÔ∏è‚ù§Ô∏è</p>
          <p><strong>Forever yours, Guggu üíû</strong></p>
        </div>

        <div class="reasons-title">Reasons I love you</div>
        <ul class="reasons" id="reasonsList">
          <li style="animation-delay: 3.2s">Your smile that lights up my whole world</li>
          <li style="animation-delay: 3.6s">The way you make everything better</li>
          <li style="animation-delay: 4.0s">How you're cute even when you're angry</li>
          <li style="animation-delay: 4.4s">Your voice that I never get tired of</li>
          <li style="animation-delay: 4.8s">Because you're YOU, and that's enough üíó</li>
        </ul>

        <!-- Photo Gallery -->
        <div class="gallery-section" id="gallerySection">
          <div class="gallery-title">Us üíï</div>
          <div class="gallery-container" id="galleryContainer">
            <div class="gallery-slide active" data-index="0">
              <img src="photo1.png" alt="Us together" />
            </div>
            <div class="gallery-slide next" data-index="1">
              <img src="photo2.png" alt="Us together" />
            </div>
            <div class="gallery-slide" data-index="2">
              <img src="photo3.png" alt="Us together" />
            </div>
          </div>
          <div class="gallery-dots">
            <button class="gallery-dot active" data-index="0" aria-label="Photo 1"></button>
            <button class="gallery-dot" data-index="1" aria-label="Photo 2"></button>
            <button class="gallery-dot" data-index="2" aria-label="Photo 3"></button>
          </div>
          <div class="gallery-caption">Our memories ‚ú®</div>
        </div>

        <div class="couple-emoji">üíë</div>
      </div>
    </div>
  </div>

  <canvas id="confetti-canvas"></canvas>

  <!-- Background music: put "song.mp3" in the same folder -->
  <audio id="bgMusic" loop preload="auto">
    <source src="song.mp3" type="audio/mpeg" />
  </audio>

  <script>
    // ===================================
    // DEVICE DETECTION
    // ===================================
    const isMobile = /Android|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)
                     || window.innerWidth < 600;
    const STAR_COUNT = isMobile ? 70 : 150;
    const PETAL_INTERVAL = isMobile ? 2500 : 1500;
    const HEART_INTERVAL = isMobile ? 3000 : 1800;

    // ===================================
    // LOADING SCREEN
    // ===================================
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.add('hidden');
        document.getElementById('envelopeScreen').classList.add('visible');
        document.getElementById('musicBtn').classList.add('visible');
      }, 3000);
    });

    // ===================================
    // STARS
    // ===================================
    const starsBg = document.getElementById('starsBg');
    for (let i = 0; i < STAR_COUNT; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.left = Math.random() * 100 + '%';
      star.style.top = Math.random() * 100 + '%';
      star.style.setProperty('--dur', (2 + Math.random() * 5) + 's');
      star.style.setProperty('--opacity', (0.3 + Math.random() * 0.7));
      star.style.animationDelay = Math.random() * 5 + 's';
      const size = (1.5 + Math.random() * 3) + 'px';
      star.style.width = size; star.style.height = size;
      starsBg.appendChild(star);
    }

    // ===================================
    // ROSE PETALS
    // ===================================
    const petalsBg = document.getElementById('petalsBg');
    function createPetal() {
      const p = document.createElement('div');
      p.className = 'petal';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (8 + Math.random() * 12) + 's';
      p.style.animationDelay = Math.random() * 5 + 's';
      const size = (10 + Math.random() * 16) + 'px';
      p.style.width = size; p.style.height = size;
      p.style.opacity = (0.2 + Math.random() * 0.3);
      const hue = Math.random() > 0.5 ? '#f48fb1' : '#e91e63';
      p.style.background = `radial-gradient(ellipse at 30% 30%, ${hue}, #880e4f)`;
      petalsBg.appendChild(p);
      setTimeout(() => p.remove(), 22000);
    }
    const initialPetals = isMobile ? 6 : 12;
    for (let i = 0; i < initialPetals; i++) setTimeout(createPetal, i * 500);
    setInterval(createPetal, PETAL_INTERVAL);

    // ===================================
    // FLOATING HEARTS
    // ===================================
    const heartsBg = document.getElementById('heartsBg');
    const heartEmojis = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'ü©∑', 'üíå'];
    function createFloatingHeart() {
      const h = document.createElement('div');
      h.classList.add('floating-heart');
      h.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
      h.style.left = Math.random() * 100 + '%';
      h.style.fontSize = (12 + Math.random() * 18) + 'px';
      h.style.animationDuration = (10 + Math.random() * 12) + 's';
      heartsBg.appendChild(h);
      setTimeout(() => h.remove(), 24000);
    }
    const initialHearts = isMobile ? 4 : 8;
    for (let i = 0; i < initialHearts; i++) setTimeout(createFloatingHeart, i * 500);
    setInterval(createFloatingHeart, HEART_INTERVAL);

    // ===================================
    // SPARKLE CURSOR
    // ===================================
    const sparkles = ['‚ú®', '‚≠ê', 'üí´', 'üåü', 'üíñ', 'ü©∑'];
    let lastSparkle = 0;
    document.addEventListener('mousemove', (e) => {
      if (Date.now() - lastSparkle < 90) return;
      lastSparkle = Date.now();
      const s = document.createElement('div');
      s.className = 'sparkle';
      s.textContent = sparkles[Math.floor(Math.random() * sparkles.length)];
      s.style.left = e.clientX + 'px'; s.style.top = e.clientY + 'px';
      s.style.setProperty('--sx', (Math.random() - 0.5) * 40 + 'px');
      s.style.setProperty('--sy', (Math.random() - 0.5) * 40 - 15 + 'px');
      document.body.appendChild(s);
      setTimeout(() => s.remove(), 700);
    });

    // ===================================
    // MUSIC
    // ===================================
    const bgMusic = document.getElementById('bgMusic');
    const musicBtn = document.getElementById('musicBtn');
    let musicPlaying = false;
    bgMusic.volume = 0.35;

    function toggleMusic() {
      if (musicPlaying) {
        bgMusic.pause();
        musicBtn.textContent = 'üîá';
        musicBtn.classList.remove('playing');
      } else {
        bgMusic.play().then(() => {
          musicBtn.textContent = 'üéµ';
          musicBtn.classList.add('playing');
        }).catch(() => {});
      }
      musicPlaying = !musicPlaying;
    }

    // ===================================
    // ENVELOPE
    // ===================================
    let envelopeOpened = false;
    function openEnvelope() {
      if (envelopeOpened) return;
      envelopeOpened = true;

      // Haptic feedback on mobile
      if (navigator.vibrate) navigator.vibrate(50);

      if (!musicPlaying) {
        bgMusic.play().then(() => {
          musicPlaying = true;
          musicBtn.textContent = 'üéµ';
          musicBtn.classList.add('playing');
        }).catch(() => {});
      }
      document.getElementById('envelopeFlap').classList.add('open');
      setTimeout(() => document.getElementById('envelopeLetter').classList.add('rise'), 400);
      setTimeout(() => {
        document.getElementById('envelopeScreen').classList.add('hidden');
        document.getElementById('mainContent').classList.add('show');
        setTimeout(typeQuestion, 500);
      }, 2000);
    }

    // Keyboard support for envelope
    document.getElementById('envelope').addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openEnvelope();
      }
    });

    // ===================================
    // TYPING
    // ===================================
    const fullQuestion = "Will You Be My Valentine, Guggu?";
    let charIndex = 0;
    const questionEl = document.getElementById('questionText');
    function typeQuestion() {
      if (charIndex < fullQuestion.length) {
        questionEl.innerHTML = fullQuestion.substring(0, charIndex + 1) + '<span class="typing-cursor"></span>';
        charIndex++;
        setTimeout(typeQuestion, 65);
      } else {
        setTimeout(() => { questionEl.innerHTML = fullQuestion; }, 1500);
      }
    }

    // ===================================
    // NO BUTTON
    // ===================================
    const noBtn = document.getElementById('noBtn');
    const noButtonTexts = [
      "No", "No is not a choice!", "Nahi hoga No!", "Try again Guggu üòú",
      "Not happening!", "Catch me if you can!", "Hehe wrong button!",
      "Still No? Really?!", "I'll keep running!", "You can't say No!",
      "Bas Yes bolo na!", "Teddy is crying now!", "No button broken üòÖ",
      "Error 404: No not found", "Nice try cutie!", "Nope nope nope!",
    ];
    let dodgeCount = 0, spinAngle = 0;

    function getCardBounds() {
      const card = document.getElementById('mainCard');
      const r = card.getBoundingClientRect();
      const bw = noBtn.offsetWidth || 80, bh = noBtn.offsetHeight || 48;
      return { minX: r.left + 15, maxX: r.right - bw - 15, minY: r.top + 15, maxY: r.bottom - bh - 15 };
    }
    function randomInCard() {
      const b = getCardBounds();
      return { x: b.minX + Math.random() * (b.maxX - b.minX), y: b.minY + Math.random() * (b.maxY - b.minY) };
    }

    function dodgeNoButton() {
      dodgeCount++;
      if (navigator.vibrate) navigator.vibrate(30);
      noBtn.textContent = noButtonTexts[dodgeCount % noButtonTexts.length];
      noBtn.style.position = 'fixed'; noBtn.style.zIndex = '999';
      const pos = randomInCard();
      const scale = Math.max(0.55, 1 - dodgeCount * 0.03);
      const m = dodgeCount % 5;
      if (m === 0) {
        spinAngle += 360;
        noBtn.style.transition = 'all 0.4s cubic-bezier(0.34,1.56,0.64,1)';
        noBtn.style.left = pos.x+'px'; noBtn.style.top = pos.y+'px';
        noBtn.style.transform = `rotate(${spinAngle}deg) scale(${scale})`;
      } else if (m === 1) {
        const m1 = randomInCard(), m2 = randomInCard();
        noBtn.style.transition = 'all 0.12s linear';
        noBtn.style.left = m1.x+'px'; noBtn.style.top = m1.y+'px';
        setTimeout(()=>{ noBtn.style.left=m2.x+'px'; noBtn.style.top=m2.y+'px'; },120);
        setTimeout(()=>{ noBtn.style.left=pos.x+'px'; noBtn.style.top=pos.y+'px'; noBtn.style.transform=`scale(${scale})`; },240);
      } else if (m === 2) {
        noBtn.style.transition='none';
        noBtn.style.left=pos.x+'px'; noBtn.style.top=pos.y+'px';
        noBtn.style.transform=`scaleY(-1) scale(${scale})`;
        setTimeout(()=>{ noBtn.style.transition='all 0.3s ease'; noBtn.style.transform=`scaleY(1) scale(${scale})`; },350);
      } else if (m === 3) {
        noBtn.style.transition='all 0.3s cubic-bezier(0.22,1,0.36,1)';
        noBtn.style.left=pos.x+'px'; noBtn.style.top=(pos.y-60)+'px';
        noBtn.style.transform=`rotate(${(Math.random()-0.5)*30}deg) scale(${scale})`;
        setTimeout(()=>{ noBtn.style.transition='all 0.25s ease'; noBtn.style.top=pos.y+'px'; noBtn.style.transform=`rotate(0deg) scale(${scale})`; },300);
      } else {
        noBtn.style.transition='all 0.15s ease-in'; noBtn.style.transform='scale(0)';
        setTimeout(()=>{ noBtn.style.transition='none'; noBtn.style.left=pos.x+'px'; noBtn.style.top=pos.y+'px';
          setTimeout(()=>{ noBtn.style.transition='all 0.25s cubic-bezier(0.34,1.56,0.64,1)'; noBtn.style.transform=`scale(${scale})`; },50);
        },150);
      }
      const yesBtn = document.getElementById('yesBtn');
      yesBtn.style.transform = `scale(${Math.min(1.5, 1 + dodgeCount * 0.05)})`;
      if (dodgeCount > 8) noBtn.classList.add('shaking');
    }
    noBtn.addEventListener('mouseenter', dodgeNoButton);
    noBtn.addEventListener('touchstart', e => { e.preventDefault(); dodgeNoButton(); });
    noBtn.addEventListener('click', e => { e.preventDefault(); dodgeNoButton(); });

    // ===================================
    // YES
    // ===================================
    function sayYes() {
      if (navigator.vibrate) navigator.vibrate([50, 30, 50]);
      document.getElementById('questionScreen').style.display = 'none';
      document.getElementById('yesScreen').style.display = 'flex';
      noBtn.style.display = 'none';

      // Shift background to warm mode
      document.body.classList.add('warm');

      burstHearts();
      startConfetti();
      startContinuousHearts();
      typeLoveLetter();
      initGallery();
    }

    // Typewriter effect for love letter
    function typeLoveLetter() {
      const lines = document.querySelectorAll('#loveLetterBox p');
      lines.forEach((line, i) => {
        setTimeout(() => {
          line.classList.add('typed');
        }, 600 + i * 700);
      });
    }

    function burstHearts() {
      const cx = window.innerWidth/2, cy = window.innerHeight/2;
      const h = ['‚ù§Ô∏è','üíï','üíñ','üíó','üåπ','‚ú®','üåü','ü©∑'];
      const count = isMobile ? 25 : 40;
      for (let i = 0; i < count; i++) {
        const el = document.createElement('div');
        el.className = 'burst-heart';
        el.textContent = h[Math.floor(Math.random()*h.length)];
        el.style.left = cx+'px'; el.style.top = cy+'px';
        el.style.fontSize = (18+Math.random()*30)+'px';
        const a = (Math.PI*2*i)/count, d = 120+Math.random()*300;
        el.style.setProperty('--tx', Math.cos(a)*d+'px');
        el.style.setProperty('--ty', Math.sin(a)*d+'px');
        document.body.appendChild(el);
        setTimeout(()=>el.remove(), 1500);
      }
    }

    function startContinuousHearts() {
      const interval = isMobile ? 600 : 350;
      setInterval(() => {
        const h = document.createElement('div');
        h.className = 'continuous-heart';
        h.textContent = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
        h.style.left = Math.random()*100+'%'; h.style.bottom = '0px';
        h.style.fontSize = (14+Math.random()*18)+'px';
        document.body.appendChild(h);
        setTimeout(()=>h.remove(), 3000);
      }, interval);
    }

    // ===================================
    // PHOTO GALLERY
    // ===================================
    let currentSlide = 0;
    const totalSlides = 3;
    let galleryTimer;

    function initGallery() {
      // Auto-rotate every 3.5 seconds
      galleryTimer = setInterval(() => {
        goToSlide((currentSlide + 1) % totalSlides);
      }, 3500);

      // Click dots
      document.querySelectorAll('.gallery-dot').forEach(dot => {
        dot.addEventListener('click', () => {
          clearInterval(galleryTimer);
          goToSlide(parseInt(dot.dataset.index));
          galleryTimer = setInterval(() => {
            goToSlide((currentSlide + 1) % totalSlides);
          }, 3500);
        });
      });

      // Swipe support
      let touchStartX = 0;
      const container = document.getElementById('galleryContainer');
      container.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].clientX;
      }, { passive: true });
      container.addEventListener('touchend', (e) => {
        const diff = touchStartX - e.changedTouches[0].clientX;
        if (Math.abs(diff) > 40) {
          clearInterval(galleryTimer);
          if (diff > 0) {
            goToSlide((currentSlide + 1) % totalSlides);
          } else {
            goToSlide((currentSlide - 1 + totalSlides) % totalSlides);
          }
          galleryTimer = setInterval(() => {
            goToSlide((currentSlide + 1) % totalSlides);
          }, 3500);
        }
      }, { passive: true });
    }

    function goToSlide(index) {
      currentSlide = index;
      const slides = document.querySelectorAll('.gallery-slide');
      const dots = document.querySelectorAll('.gallery-dot');

      slides.forEach((slide, i) => {
        slide.classList.remove('active', 'prev', 'next');
        if (i === index) {
          slide.classList.add('active');
        } else if (i === (index - 1 + totalSlides) % totalSlides) {
          slide.classList.add('prev');
        } else if (i === (index + 1) % totalSlides) {
          slide.classList.add('next');
        }
      });

      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    // ===================================
    // CONFETTI
    // ===================================
    function startConfetti() {
      const c = document.getElementById('confetti-canvas'), ctx = c.getContext('2d');
      c.width = window.innerWidth; c.height = window.innerHeight;
      const count = isMobile ? 150 : 250;
      const pcs = [], cols = ['#e91e63','#f44336','#ff5722','#ff9800','#ffc107','#ffeb3b','#e040fb','#7c4dff','#448aff','#69f0ae'];
      for (let i=0; i<count; i++) pcs.push({
        x:Math.random()*c.width, y:Math.random()*c.height-c.height,
        w:5+Math.random()*8, h:3+Math.random()*6,
        color:cols[Math.floor(Math.random()*cols.length)],
        vx:(Math.random()-0.5)*4, vy:2+Math.random()*4,
        rot:Math.random()*360, rs:(Math.random()-0.5)*10, o:0.9+Math.random()*0.1
      });
      let f=0; const mx=350;
      (function anim(){
        f++; if(f>mx){ctx.clearRect(0,0,c.width,c.height);return;}
        ctx.clearRect(0,0,c.width,c.height);
        pcs.forEach(p=>{
          p.x+=p.vx; p.y+=p.vy; p.vy+=0.04; p.rot+=p.rs;
          if(f>mx-80) p.o=Math.max(0,p.o-0.012);
          ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
          ctx.globalAlpha=p.o; ctx.fillStyle=p.color;
          ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore();
        });
        requestAnimationFrame(anim);
      })();
    }
    window.addEventListener('resize',()=>{
      const c=document.getElementById('confetti-canvas');
      c.width=window.innerWidth; c.height=window.innerHeight;
    });
  </script>
</body>
</html>
