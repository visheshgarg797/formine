<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A Special Message For You, Guggu üíå</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Quicksand:wght@400;600;700&family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      overflow: hidden;
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #1a0a1e 0%, #2d1b3d 30%, #1a0a2e 60%, #0d0515 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    /* ===== STARRY / SPARKLE BACKGROUND ===== */
    .stars-bg {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 0; overflow: hidden;
    }
    .star {
      position: absolute;
      width: 3px; height: 3px;
      background: white;
      border-radius: 50%;
      animation: twinkle var(--dur) ease-in-out infinite;
      opacity: 0;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0; transform: scale(0.5); }
      50% { opacity: var(--opacity); transform: scale(1.2); }
    }

    /* Floating hearts */
    .hearts-bg {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 1; overflow: hidden;
    }
    .floating-heart {
      position: absolute; bottom: -60px;
      animation: floatUp linear infinite; opacity: 0.5;
    }
    @keyframes floatUp {
      0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 0.5; }
      50% { opacity: 0.7; }
      100% { transform: translateY(-110vh) rotate(360deg) scale(0.3); opacity: 0; }
    }

    /* ===== SPARKLE CURSOR TRAIL ===== */
    .sparkle {
      position: fixed; pointer-events: none; z-index: 9999;
      font-size: 14px;
      animation: sparkleAnim 0.8s ease-out forwards;
    }
    @keyframes sparkleAnim {
      0% { opacity: 1; transform: translate(0, 0) scale(1) rotate(0deg); }
      100% { opacity: 0; transform: translate(var(--sx), var(--sy)) scale(0) rotate(180deg); }
    }

    /* ===== ENVELOPE INTRO ===== */
    .envelope-screen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      z-index: 500; background: linear-gradient(135deg, #1a0a1e 0%, #2d1b3d 30%, #1a0a2e 60%, #0d0515 100%);
      transition: opacity 0.8s ease;
    }
    .envelope-screen.hidden { opacity: 0; pointer-events: none; }

    .envelope-wrapper {
      position: relative; width: 260px; height: 180px;
      cursor: pointer; animation: envelopePulse 2s ease-in-out infinite;
    }
    @keyframes envelopePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .envelope-body {
      position: absolute; bottom: 0; width: 260px; height: 150px;
      background: linear-gradient(145deg, #f48fb1, #e91e63);
      border-radius: 8px;
      box-shadow: 0 15px 40px rgba(233, 30, 99, 0.4);
    }
    .envelope-flap {
      position: absolute; top: 0; left: 0; width: 0; height: 0;
      border-left: 130px solid transparent;
      border-right: 130px solid transparent;
      border-top: 100px solid #f06292;
      transform-origin: top center;
      transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
      z-index: 2;
    }
    .envelope-flap.open { transform: rotateX(180deg); }
    .envelope-heart {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      font-size: 50px; z-index: 3;
      animation: heartPulse 1.2s ease-in-out infinite;
    }
    @keyframes heartPulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.2); }
    }
    .envelope-letter {
      position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
      width: 220px; height: 120px; background: white;
      border-radius: 4px; z-index: 1;
      transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Great Vibes', cursive; font-size: 1.1rem; color: #c2185b;
      padding: 10px;
    }
    .envelope-letter.rise { transform: translateX(-50%) translateY(-140px); }

    .envelope-tap-text {
      margin-top: 30px;
      font-family: 'Quicksand', sans-serif;
      color: rgba(255, 255, 255, 0.7);
      font-size: 1rem;
      animation: fadeInOut 2s ease-in-out infinite;
    }
    @keyframes fadeInOut {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }

    /* ===== MUSIC TOGGLE ===== */
    .music-btn {
      position: fixed; top: 20px; right: 20px; z-index: 600;
      width: 44px; height: 44px; border-radius: 50%;
      background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white; font-size: 20px; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.3s;
    }
    .music-btn:hover { background: rgba(255, 255, 255, 0.25); transform: scale(1.1); }
    .music-btn.playing { animation: musicPulse 1s ease-in-out infinite; }
    @keyframes musicPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(233, 30, 99, 0.4); }
      50% { box-shadow: 0 0 0 10px rgba(233, 30, 99, 0); }
    }

    /* ===== MAIN CARD ===== */
    .main-content { display: none; }
    .main-content.show { display: flex; align-items: center; justify-content: center; width: 100%; }

    .card {
      position: relative; z-index: 10;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 30px;
      padding: 50px 40px; max-width: 500px; width: 90%;
      text-align: center;
      box-shadow: 0 25px 60px rgba(233, 30, 99, 0.2), 0 0 100px rgba(233, 30, 99, 0.1);
      animation: cardEntry 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      opacity: 0; transform: scale(0.8) translateY(30px);
    }
    @keyframes cardEntry {
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    /* Teddy */
    .teddy-container {
      position: relative; width: 150px; height: 150px;
      margin: 0 auto 20px;
      animation: teddyBounce 2s ease-in-out infinite;
    }
    @keyframes teddyBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-12px); }
    }
    .teddy {
      font-size: 120px; line-height: 150px;
      filter: drop-shadow(0 8px 20px rgba(233, 30, 99, 0.3));
      user-select: none;
    }
    .teddy-heart {
      position: absolute; top: 10px; right: 5px; font-size: 36px;
      animation: heartPulse 1.2s ease-in-out infinite;
    }

    /* Typing cursor */
    .question {
      font-family: 'Dancing Script', cursive;
      font-size: 2.4rem; font-weight: 700;
      color: #f48fb1; margin-bottom: 10px; line-height: 1.3;
      min-height: 3.2rem;
    }
    .typing-cursor {
      display: inline-block; width: 3px; height: 2.2rem;
      background: #f48fb1; margin-left: 4px;
      animation: blink 0.6s step-end infinite; vertical-align: text-bottom;
    }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    .sub-text {
      font-size: 1rem; color: rgba(255, 255, 255, 0.6);
      margin-bottom: 35px; opacity: 0;
      animation: fadeIn 0.5s ease forwards;
      animation-delay: 2.5s;
    }
    @keyframes fadeIn { to { opacity: 1; } }

    /* Buttons */
    .buttons {
      display: flex; justify-content: center; gap: 24px;
      align-items: center; min-height: 70px; position: relative;
      opacity: 0; animation: fadeIn 0.5s ease forwards; animation-delay: 2.8s;
    }
    .btn {
      padding: 14px 40px; border: none; border-radius: 50px;
      font-family: 'Quicksand', sans-serif;
      font-size: 1.15rem; font-weight: 700;
      cursor: pointer; letter-spacing: 0.5px; position: relative;
    }
    .btn-yes {
      background: linear-gradient(135deg, #e91e63, #c2185b);
      color: white;
      box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4);
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .btn-yes:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(233, 30, 99, 0.6);
    }
    .btn-no {
      background: linear-gradient(135deg, #546e7a, #455a64);
      color: white;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      position: absolute;
      user-select: none; white-space: nowrap;
    }
    .btn-no.shaking { animation: shake 0.3s infinite; }
    @keyframes shake {
      0%, 100% { transform: translateX(0) rotate(0deg); }
      20% { transform: translateX(-4px) rotate(-3deg); }
      40% { transform: translateX(4px) rotate(3deg); }
      60% { transform: translateX(-3px) rotate(-2deg); }
      80% { transform: translateX(3px) rotate(2deg); }
    }

    /* ===== YES SCREEN ===== */
    .yes-screen {
      display: none; flex-direction: column; align-items: center;
      animation: cardEntry 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }
    .yes-screen .big-heart {
      font-size: 90px; animation: heartPulse 1s ease-in-out infinite; margin-bottom: 5px;
    }
    .yes-screen h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 2.8rem; color: #f48fb1; margin-bottom: 15px;
    }
    .love-letter-box {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px; padding: 25px 20px;
      max-width: 380px; margin: 0 auto;
    }
    .love-letter-box p {
      font-size: 1.05rem; color: rgba(255, 255, 255, 0.85);
      line-height: 1.9; margin-bottom: 8px;
    }
    .love-letter-box p strong {
      color: #f48fb1; font-size: 1.1rem;
    }
    .yes-screen .couple-emoji {
      font-size: 60px; margin-top: 15px;
      animation: teddyBounce 2s ease-in-out infinite;
    }

    /* Continuous hearts after yes */
    .continuous-heart {
      position: fixed; pointer-events: none; z-index: 100;
      animation: riseHeart 3s ease-out forwards;
    }
    @keyframes riseHeart {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-300px) scale(0.3); }
    }

    /* Burst hearts on yes */
    .burst-heart {
      position: fixed; font-size: 30px; z-index: 100;
      pointer-events: none;
      animation: burstAnim 1.5s ease-out forwards;
    }
    @keyframes burstAnim {
      0% { opacity: 1; transform: translate(0, 0) scale(1) rotate(0deg); }
      100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0.3) rotate(360deg); }
    }

    /* Confetti canvas */
    #confetti-canvas {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 200;
    }

    /* Responsive */
    @media (max-width: 500px) {
      .card { padding: 40px 24px; border-radius: 24px; }
      .question { font-size: 1.9rem; }
      .teddy { font-size: 90px; line-height: 120px; }
      .teddy-container { width: 120px; height: 120px; }
      .btn { padding: 12px 28px; font-size: 1rem; }
      .yes-screen h1 { font-size: 2.2rem; }
      .envelope-wrapper { width: 200px; height: 140px; }
      .envelope-body { width: 200px; height: 115px; }
      .envelope-flap { border-left-width: 100px; border-right-width: 100px; border-top-width: 80px; }
      .envelope-letter { width: 170px; height: 90px; font-size: 0.95rem; }
      .envelope-heart { font-size: 38px; }
    }
  </style>
</head>
<body>

  <!-- Stars background -->
  <div class="stars-bg" id="starsBg"></div>

  <!-- Floating hearts background -->
  <div class="hearts-bg" id="heartsBg"></div>

  <!-- Music toggle -->
  <button class="music-btn" id="musicBtn" onclick="toggleMusic()" title="Toggle Music">üîá</button>

  <!-- ===== ENVELOPE INTRO ===== -->
  <div class="envelope-screen" id="envelopeScreen">
    <div class="envelope-wrapper" id="envelope" onclick="openEnvelope()">
      <div class="envelope-flap" id="envelopeFlap"></div>
      <div class="envelope-body"></div>
      <div class="envelope-heart">üíå</div>
      <div class="envelope-letter" id="envelopeLetter">A special message just for you, Guggu...</div>
    </div>
    <p class="envelope-tap-text">‚ú® Tap the envelope ‚ú®</p>
  </div>

  <!-- ===== MAIN CONTENT ===== -->
  <div class="main-content" id="mainContent">
    <div class="card" id="mainCard">
      <!-- Question screen -->
      <div id="questionScreen">
        <div class="teddy-container">
          <div class="teddy">üß∏</div>
          <div class="teddy-heart">‚ù§Ô∏è</div>
        </div>
        <h1 class="question" id="questionText"></h1>
        <p class="sub-text">Pretty please? ü•∫</p>
        <div class="buttons" id="buttonsContainer">
          <button class="btn btn-yes" id="yesBtn" onclick="sayYes()">Yes! üíñ</button>
          <button class="btn btn-no" id="noBtn">No</button>
        </div>
      </div>

      <!-- Yes screen -->
      <div class="yes-screen" id="yesScreen">
        <div class="big-heart">üíñ</div>
        <h1>Yayyyy, Guggu! üéâ</h1>
        <div class="love-letter-box">
          <p>You are the best person and the most beautiful person I know üòç</p>
          <p>I wanna love you till infinity ‚ôæÔ∏è‚ù§Ô∏è</p>
          <p><strong>Forever yours, Guggu üíû</strong></p>
        </div>
        <div class="couple-emoji">üíë</div>
      </div>
    </div>
  </div>

  <!-- Confetti canvas -->
  <canvas id="confetti-canvas"></canvas>

  <!-- Background music (royalty-free romantic melody) -->
  <audio id="bgMusic" loop preload="auto">
    <source src="https://cdn.pixabay.com/audio/2024/11/28/audio_3a58417e29.mp3" type="audio/mpeg" />
  </audio>

  <script>
    // ===================================
    // STARS BACKGROUND
    // ===================================
    const starsBg = document.getElementById('starsBg');
    for (let i = 0; i < 120; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.left = Math.random() * 100 + '%';
      star.style.top = Math.random() * 100 + '%';
      star.style.setProperty('--dur', (2 + Math.random() * 4) + 's');
      star.style.setProperty('--opacity', (0.3 + Math.random() * 0.7));
      star.style.animationDelay = Math.random() * 4 + 's';
      star.style.width = (2 + Math.random() * 3) + 'px';
      star.style.height = star.style.width;
      starsBg.appendChild(star);
    }

    // ===================================
    // FLOATING HEARTS
    // ===================================
    const heartsBg = document.getElementById('heartsBg');
    const heartEmojis = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'ü©∑', 'üíå'];
    function createFloatingHeart() {
      const heart = document.createElement('div');
      heart.classList.add('floating-heart');
      heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
      heart.style.left = Math.random() * 100 + '%';
      heart.style.fontSize = (14 + Math.random() * 20) + 'px';
      heart.style.animationDuration = (8 + Math.random() * 10) + 's';
      heart.style.animationDelay = Math.random() * 2 + 's';
      heartsBg.appendChild(heart);
      setTimeout(() => heart.remove(), 20000);
    }
    for (let i = 0; i < 10; i++) setTimeout(createFloatingHeart, i * 400);
    setInterval(createFloatingHeart, 1200);

    // ===================================
    // SPARKLE CURSOR TRAIL
    // ===================================
    const sparkleChars = ['‚ú®', '‚≠ê', 'üí´', 'üåü', 'üíñ'];
    let lastSparkle = 0;
    document.addEventListener('mousemove', (e) => {
      const now = Date.now();
      if (now - lastSparkle < 80) return;
      lastSparkle = now;
      const s = document.createElement('div');
      s.className = 'sparkle';
      s.textContent = sparkleChars[Math.floor(Math.random() * sparkleChars.length)];
      s.style.left = e.clientX + 'px';
      s.style.top = e.clientY + 'px';
      s.style.setProperty('--sx', (Math.random() - 0.5) * 40 + 'px');
      s.style.setProperty('--sy', (Math.random() - 0.5) * 40 - 20 + 'px');
      document.body.appendChild(s);
      setTimeout(() => s.remove(), 800);
    });

    // ===================================
    // MUSIC
    // ===================================
    const bgMusic = document.getElementById('bgMusic');
    const musicBtn = document.getElementById('musicBtn');
    let musicPlaying = false;
    bgMusic.volume = 0.4;

    function toggleMusic() {
      if (musicPlaying) {
        bgMusic.pause();
        musicBtn.textContent = 'üîá';
        musicBtn.classList.remove('playing');
      } else {
        bgMusic.play();
        musicBtn.textContent = 'üéµ';
        musicBtn.classList.add('playing');
      }
      musicPlaying = !musicPlaying;
    }

    // ===================================
    // ENVELOPE INTRO
    // ===================================
    let envelopeOpened = false;
    function openEnvelope() {
      if (envelopeOpened) return;
      envelopeOpened = true;

      // Start music on first interaction
      if (!musicPlaying) {
        bgMusic.play().then(() => {
          musicPlaying = true;
          musicBtn.textContent = 'üéµ';
          musicBtn.classList.add('playing');
        }).catch(() => {});
      }

      // Open flap
      document.getElementById('envelopeFlap').classList.add('open');

      // Slide letter up
      setTimeout(() => {
        document.getElementById('envelopeLetter').classList.add('rise');
      }, 400);

      // Fade out envelope, show main content
      setTimeout(() => {
        document.getElementById('envelopeScreen').classList.add('hidden');
        const mainContent = document.getElementById('mainContent');
        mainContent.classList.add('show');
        // Start typing animation
        setTimeout(typeQuestion, 500);
      }, 1800);
    }

    // ===================================
    // TYPING ANIMATION
    // ===================================
    const fullQuestion = "Will You Be My Valentine, Guggu?";
    let charIndex = 0;
    const questionEl = document.getElementById('questionText');

    function typeQuestion() {
      if (charIndex < fullQuestion.length) {
        questionEl.innerHTML = fullQuestion.substring(0, charIndex + 1) + '<span class="typing-cursor"></span>';
        charIndex++;
        setTimeout(typeQuestion, 70);
      } else {
        // Remove cursor after typing done
        setTimeout(() => {
          questionEl.innerHTML = fullQuestion;
        }, 1500);
      }
    }

    // ===================================
    // NO BUTTON DODGE LOGIC
    // ===================================
    const noBtn = document.getElementById('noBtn');

    const noButtonTexts = [
      "No",
      "No is not a choice!",
      "Nahi hoga No!",
      "Try again Guggu üòú",
      "Not happening!",
      "Catch me if you can!",
      "Hehe wrong button!",
      "Still No? Really?!",
      "I'll keep running!",
      "You can't say No!",
      "Bas Yes bolo na!",
      "Teddy is crying now!",
      "No button broken üòÖ",
      "Error 404: No not found",
      "Nice try cutie!",
      "Nope nope nope!",
    ];

    let dodgeCount = 0;
    let spinAngle = 0;

    function getCardBounds() {
      const card = document.getElementById('mainCard');
      const cardRect = card.getBoundingClientRect();
      const btnW = noBtn.offsetWidth || 80;
      const btnH = noBtn.offsetHeight || 48;
      const pad = 15;
      return {
        minX: cardRect.left + pad,
        maxX: cardRect.right - btnW - pad,
        minY: cardRect.top + pad,
        maxY: cardRect.bottom - btnH - pad,
      };
    }

    function randomInCard() {
      const b = getCardBounds();
      return {
        x: b.minX + Math.random() * (b.maxX - b.minX),
        y: b.minY + Math.random() * (b.maxY - b.minY),
      };
    }

    function dodgeNoButton() {
      dodgeCount++;
      noBtn.textContent = noButtonTexts[dodgeCount % noButtonTexts.length];
      noBtn.style.position = 'fixed';
      noBtn.style.zIndex = '999';

      const pos = randomInCard();
      const scale = Math.max(0.55, 1 - dodgeCount * 0.03);
      const moveStyle = dodgeCount % 5;

      if (moveStyle === 0) {
        spinAngle += 360;
        noBtn.style.transition = 'all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)';
        noBtn.style.left = pos.x + 'px';
        noBtn.style.top = pos.y + 'px';
        noBtn.style.transform = `rotate(${spinAngle}deg) scale(${scale})`;
      } else if (moveStyle === 1) {
        const mid1 = randomInCard();
        const mid2 = randomInCard();
        noBtn.style.transition = 'all 0.12s linear';
        noBtn.style.left = mid1.x + 'px';
        noBtn.style.top = mid1.y + 'px';
        setTimeout(() => { noBtn.style.left = mid2.x + 'px'; noBtn.style.top = mid2.y + 'px'; }, 120);
        setTimeout(() => { noBtn.style.left = pos.x + 'px'; noBtn.style.top = pos.y + 'px'; noBtn.style.transform = `scale(${scale})`; }, 240);
      } else if (moveStyle === 2) {
        noBtn.style.transition = 'none';
        noBtn.style.left = pos.x + 'px';
        noBtn.style.top = pos.y + 'px';
        noBtn.style.transform = `scaleY(-1) scale(${scale})`;
        setTimeout(() => { noBtn.style.transition = 'all 0.3s ease'; noBtn.style.transform = `scaleY(1) scale(${scale})`; }, 350);
      } else if (moveStyle === 3) {
        noBtn.style.transition = 'all 0.3s cubic-bezier(0.22, 1, 0.36, 1)';
        noBtn.style.left = pos.x + 'px';
        noBtn.style.top = (pos.y - 60) + 'px';
        noBtn.style.transform = `rotate(${(Math.random() - 0.5) * 30}deg) scale(${scale})`;
        setTimeout(() => { noBtn.style.transition = 'all 0.25s ease'; noBtn.style.top = pos.y + 'px'; noBtn.style.transform = `rotate(0deg) scale(${scale})`; }, 300);
      } else {
        noBtn.style.transition = 'all 0.15s ease-in';
        noBtn.style.transform = 'scale(0)';
        setTimeout(() => {
          noBtn.style.transition = 'none';
          noBtn.style.left = pos.x + 'px'; noBtn.style.top = pos.y + 'px';
          setTimeout(() => { noBtn.style.transition = 'all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1)'; noBtn.style.transform = `scale(${scale})`; }, 50);
        }, 150);
      }

      const yesBtn = document.getElementById('yesBtn');
      const yesScale = Math.min(1.5, 1 + dodgeCount * 0.05);
      yesBtn.style.transform = `scale(${yesScale})`;
      if (dodgeCount > 8) noBtn.classList.add('shaking');
    }

    noBtn.addEventListener('mouseenter', dodgeNoButton);
    noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); dodgeNoButton(); });
    noBtn.addEventListener('click', (e) => { e.preventDefault(); dodgeNoButton(); });

    // ===================================
    // YES BUTTON
    // ===================================
    function sayYes() {
      document.getElementById('questionScreen').style.display = 'none';
      document.getElementById('yesScreen').style.display = 'flex';
      noBtn.style.display = 'none';
      burstHearts();
      startConfetti();
      startContinuousHearts();
      document.body.style.background = 'linear-gradient(135deg, #1a0a1e 0%, #3d1b2d 30%, #2e0a1e 60%, #150515 100%)';
    }

    function burstHearts() {
      const cx = window.innerWidth / 2;
      const cy = window.innerHeight / 2;
      const hearts = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üåπ', '‚ú®', 'üåü'];
      for (let i = 0; i < 35; i++) {
        const h = document.createElement('div');
        h.className = 'burst-heart';
        h.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        h.style.left = cx + 'px'; h.style.top = cy + 'px';
        h.style.fontSize = (20 + Math.random() * 30) + 'px';
        const angle = (Math.PI * 2 * i) / 35;
        const dist = 150 + Math.random() * 300;
        h.style.setProperty('--tx', Math.cos(angle) * dist + 'px');
        h.style.setProperty('--ty', Math.sin(angle) * dist + 'px');
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 1500);
      }
    }

    function startContinuousHearts() {
      setInterval(() => {
        const h = document.createElement('div');
        h.className = 'continuous-heart';
        h.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
        h.style.left = Math.random() * 100 + '%';
        h.style.bottom = '0px';
        h.style.fontSize = (16 + Math.random() * 20) + 'px';
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 3000);
      }, 300);
    }

    // ===================================
    // CONFETTI
    // ===================================
    function startConfetti() {
      const canvas = document.getElementById('confetti-canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const pieces = [];
      const colors = ['#e91e63', '#f44336', '#ff5722', '#ff9800', '#ffc107', '#ffeb3b', '#e040fb', '#7c4dff', '#448aff', '#69f0ae'];
      for (let i = 0; i < 250; i++) {
        pieces.push({
          x: Math.random() * canvas.width, y: Math.random() * canvas.height - canvas.height,
          w: 6 + Math.random() * 8, h: 4 + Math.random() * 6,
          color: colors[Math.floor(Math.random() * colors.length)],
          vx: (Math.random() - 0.5) * 4, vy: 2 + Math.random() * 4,
          rot: Math.random() * 360, rotSpeed: (Math.random() - 0.5) * 10,
          opacity: 0.9 + Math.random() * 0.1,
        });
      }
      let frame = 0;
      const maxFrames = 350;
      function animate() {
        frame++;
        if (frame > maxFrames) { ctx.clearRect(0, 0, canvas.width, canvas.height); return; }
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        pieces.forEach(p => {
          p.x += p.vx; p.y += p.vy; p.vy += 0.04; p.rot += p.rotSpeed;
          if (frame > maxFrames - 80) p.opacity = Math.max(0, p.opacity - 0.012);
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate((p.rot * Math.PI) / 180);
          ctx.globalAlpha = p.opacity;
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
          ctx.restore();
        });
        requestAnimationFrame(animate);
      }
      animate();
    }

    window.addEventListener('resize', () => {
      const c = document.getElementById('confetti-canvas');
      c.width = window.innerWidth; c.height = window.innerHeight;
    });
  </script>
</body>
</html>
